# Полезная информация

## Github Actions

Сейчас настроено несколько Github Actions, помогающих автоматизировать некоторые задачи:

1. [Автоматическая проверка имени Pull Request](./.github/workflows/inspect-code.yml);
2. [Автоматическая проверка стиля](./.github/workflows/inspect-code.yml);
3. [Автоматический запуск юнит тестов для лабораторных работ](./.github/workflows/inspect-code.yml);
4. [Обновление форка с помощью комментария в Pull Request](./.github/workflows/update-fork.yml).

## Обновление форка с помощью комментария в Pull Request

Форк может находится в нескольких состояниях по отношению к upstream репозиторию:
1. Форк и upstream выровнены по состояниям;
2. В upstream появились новые изменения, которых ещё нет в форке:
   1. Например, при добавлении исправлений для уже существующих файлов.
3. В upstream появились новые изменения, которых ещё нет в форке + были изменения в форке, которые конфликтуют с изменениями из upstream:
   1. Например, когда в upstream была добавлена одна из лабораторных работ как образцовая. 

Для случаев 2 и 3 предусмотрены механизмы автоматического обновления через комментарий в Pull Request.

Для случая 2:
1. Обновление происходит с помощью комментария, содержащего следующую подстроку:
   * `/update:get_new`
   * В форке появятся изменения из upstream репозитория.

Случай 3 подразделяется на два сценария исходя из необходимости сохранения лабораторной работы студента в форке:
1. Если необходимо оставить версию лабораторной работы из форка, то обновление происходит с помощью комментария, содержащего следующую подстроку:
   * `/update:keep_fork`
   * В форке появятся изменения из upstream, не касающиеся `main.py` и `start.py` файлов для лабораторных работ:
     * Файлы `main.py` и `start.py` сохранятся так, как они есть в форке;
     * Все остальные конфликты будут разрешены в пользу upstream изменений.
2. Если необходимо залить в форк версию лабораторной работы из upstream, то обновление происходит с помощью комментария, содержащего следующую подстроку:
   * `/update:keep_upstream`
   * Форк будет выровнен по состоянию с upstream;
   * Все конфликты будут разрешены в пользу upstream изменений.
